def foo(n : size, x : R[3], y : R[3]):
  x_1 =\d0 \phi(0 == d0 ? y[0] : x[d0])
  if n < 3:
    x_2 =\d0 \phi(n == d0 ? y[n] : x_1[d0])
  x_3 =\d0 \phi(n < 3 ? x_2[d0] : x_1[d0]) # IfJoin
  y_1 =\d0_1 \phi(n < 3 ? y[d0_1] : y[d0_1]) # IfJoin
  pass
------------------------ x_1 : (var d0)
                         │   d0 < 0 ⟨d0=-1⟩ x[d0]
                         │   d0 = 0 ⟨d0=0⟩ y[0]
                         │   d0 > 0 ⟨d0=1⟩ x[d0]
                         x_2 : (var d0, n)
                         │   n < 0
                         │   │   d0 < n ⟨n=-1, d0=-2⟩ x[d0]
                         │   │   d0 - n = 0 ⟨n=-1, d0=-1⟩ y[n]
                         │   │   d0 < 0 ∧ d0 - n > 0 ⟨n=-1, d0=-1/2⟩ x[d0]
                         │   │   d0 = 0 ⟨n=-1, d0=0⟩ y[0]
                         │   │   d0 > 0 ⟨n=-1, d0=1⟩ x[d0]
                         │   n = 0
                         │   │   d0 < 0 ⟨n=0, d0=-1⟩ x[d0]
                         │   │   d0 = 0 ⟨n=0, d0=0⟩ y[n]
                         │   │   d0 > 0 ⟨n=0, d0=1⟩ x[d0]
                         │   n > 0
                         │   │   d0 < 0 ⟨n=1, d0=-1⟩ x[d0]
                         │   │   d0 = 0 ⟨n=1, d0=0⟩ y[0]
                         │   │   d0 > 0 ∧ d0 - n < 0 ⟨n=1, d0=1/2⟩ x[d0]
                         │   │   d0 - n = 0 ⟨n=1, d0=1⟩ y[n]
                         │   │   d0 > n ⟨n=1, d0=2⟩ x[d0]
                         x_3 : (var d0, n)
                         │   n < 0
                         │   │   d0 < n ⟨n=-1, d0=-2⟩ x[d0]
                         │   │   d0 - n = 0 ⟨n=-1, d0=-1⟩ y[n]
                         │   │   d0 < 0 ∧ d0 - n > 0 ⟨n=-1, d0=-1/2⟩ x[d0]
                         │   │   d0 = 0 ⟨n=-1, d0=0⟩ y[0]
                         │   │   d0 > 0 ⟨n=-1, d0=1⟩ x[d0]
                         │   n = 0
                         │   │   d0 < 0 ⟨n=0, d0=-1⟩ x[d0]
                         │   │   d0 = 0 ⟨n=0, d0=0⟩ y[n]
                         │   │   d0 > 0 ⟨n=0, d0=1⟩ x[d0]
                         │   n > 0 ∧ n - 3 < 0
                         │   │   d0 < 0 ⟨n=3/2, d0=-1⟩ x[d0]
                         │   │   d0 = 0 ⟨n=3/2, d0=0⟩ y[0]
                         │   │   d0 > 0 ∧ d0 - n < 0 ⟨n=3/2, d0=3/4⟩ x[d0]
                         │   │   d0 - n = 0 ⟨n=3/2, d0=3/2⟩ y[n]
                         │   │   d0 > n ⟨n=3/2, d0=3⟩ x[d0]
                         │   n - 3 = 0
                         │   │   d0 < 0 ⟨n=3, d0=-1⟩ x[d0]
                         │   │   d0 = 0 ⟨n=3, d0=0⟩ y[0]
                         │   │   d0 > 0 ∧ d0 - n < 0 ⟨n=3, d0=3/2⟩ x[d0]
                         │   │   d0 - n = 0 ⟨n=3, d0=3⟩ x[d0]
                         │   │   d0 > n ⟨n=3, d0=4⟩ x[d0]
                         │   n > 3
                         │   │   d0 < 0 ⟨n=4, d0=-1⟩ x[d0]
                         │   │   d0 = 0 ⟨n=4, d0=0⟩ y[0]
                         │   │   d0 > 0 ∧ d0 - n < 0 ⟨n=4, d0=2⟩ x[d0]
                         │   │   d0 - n = 0 ⟨n=4, d0=4⟩ x[d0]
                         │   │   d0 > n ⟨n=4, d0=5⟩ x[d0]
                         y_1 : (var d0_1, n)
                         │   n < 3
                         │   │   True ⟨n=0, d0_1=0⟩ y[d0_1]
                         │   n - 3 = 0
                         │   │   True ⟨n=3, d0_1=0⟩ y[d0_1]
                         │   n > 3
                         │   │   True ⟨n=4, d0_1=0⟩ y[d0_1]