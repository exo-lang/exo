def foo(z : R, n : size, x : R[3]):
  z_1 = \phi(True ? 4.2 : z)
  x_1 =\d0 \phi(0 == d0 ? 2.0 : x[d0])
  if n < 3:
    x_2 =\d0 \phi(n == d0 ? 3.0 : x_1[d0])
------------------------ z_1 : (var)
                         4.2
                         x_1 : (var d0)
                         │   d0 < 0 ⟨d0=-1⟩ x[d0]
                         │   d0 = 0 ⟨d0=0⟩ 2.0
                         │   d0 > 0 ⟨d0=1⟩ x[d0]
                         x_2 : (var d0, n)
                         │   n < 0
                         │   │   d0 < n ⟨n=-1, d0=-2⟩ x[d0]
                         │   │   d0 - n = 0 ⟨n=-1, d0=-1⟩ 3.0
                         │   │   d0 < 0 ∧ d0 - n > 0 ⟨n=-1, d0=-1/2⟩ x[d0]
                         │   │   d0 = 0 ⟨n=-1, d0=0⟩ 2.0
                         │   │   d0 > 0 ⟨n=-1, d0=1⟩ x[d0]
                         │   n = 0
                         │   │   d0 < 0 ⟨n=0, d0=-1⟩ x[d0]
                         │   │   d0 = 0 ⟨n=0, d0=0⟩ 3.0
                         │   │   d0 > 0 ⟨n=0, d0=1⟩ x[d0]
                         │   n > 0
                         │   │   d0 < 0 ⟨n=1, d0=-1⟩ x[d0]
                         │   │   d0 = 0 ⟨n=1, d0=0⟩ 2.0
                         │   │   d0 > 0 ∧ d0 - n < 0 ⟨n=1, d0=1/2⟩ x[d0]
                         │   │   d0 - n = 0 ⟨n=1, d0=1⟩ 3.0
                         │   │   d0 > n ⟨n=1, d0=2⟩ x[d0]
  else:
------------------------ z_1 : (var)
                         4.2
                         x_1 : (var d0)
                         │   d0 < 0 ⟨d0=-1⟩ x[d0]
                         │   d0 = 0 ⟨d0=0⟩ 2.0
                         │   d0 > 0 ⟨d0=1⟩ x[d0]
  z_2 = \phi(n < 3 ? z_1 : z_1) # IfJoin
  x_3 =\d0 \phi(n < 3 ? x_2[d0] : x_1[d0]) # IfJoin
  pass
------------------------ z_1 : (var)
                         4.2
                         x_1 : (var d0)
                         │   d0 < 0 ⟨d0=-1⟩ x[d0]
                         │   d0 = 0 ⟨d0=0⟩ 2.0
                         │   d0 > 0 ⟨d0=1⟩ x[d0]
                         x_2 : (var d0, n)
                         │   n < 0
                         │   │   d0 < n ⟨n=-1, d0=-2⟩ x[d0]
                         │   │   d0 - n = 0 ⟨n=-1, d0=-1⟩ 3.0
                         │   │   d0 < 0 ∧ d0 - n > 0 ⟨n=-1, d0=-1/2⟩ x[d0]
                         │   │   d0 = 0 ⟨n=-1, d0=0⟩ 2.0
                         │   │   d0 > 0 ⟨n=-1, d0=1⟩ x[d0]
                         │   n = 0
                         │   │   d0 < 0 ⟨n=0, d0=-1⟩ x[d0]
                         │   │   d0 = 0 ⟨n=0, d0=0⟩ 3.0
                         │   │   d0 > 0 ⟨n=0, d0=1⟩ x[d0]
                         │   n > 0
                         │   │   d0 < 0 ⟨n=1, d0=-1⟩ x[d0]
                         │   │   d0 = 0 ⟨n=1, d0=0⟩ 2.0
                         │   │   d0 > 0 ∧ d0 - n < 0 ⟨n=1, d0=1/2⟩ x[d0]
                         │   │   d0 - n = 0 ⟨n=1, d0=1⟩ 3.0
                         │   │   d0 > n ⟨n=1, d0=2⟩ x[d0]
                         z_2 : (var n)
                         │   n < 3 ⟨n=0⟩ 4.2
                         │   n - 3 = 0 ⟨n=3⟩ 4.2
                         │   n > 3 ⟨n=4⟩ 4.2
                         x_3 : (var d0, n)
                         │   n < 0
                         │   │   d0 < n ⟨n=-1, d0=-2⟩ x[d0]
                         │   │   d0 - n = 0 ⟨n=-1, d0=-1⟩ 3.0
                         │   │   d0 < 0 ∧ d0 - n > 0 ⟨n=-1, d0=-1/2⟩ x[d0]
                         │   │   d0 = 0 ⟨n=-1, d0=0⟩ 2.0
                         │   │   d0 > 0 ⟨n=-1, d0=1⟩ x[d0]
                         │   n = 0
                         │   │   d0 < 0 ⟨n=0, d0=-1⟩ x[d0]
                         │   │   d0 = 0 ⟨n=0, d0=0⟩ 3.0
                         │   │   d0 > 0 ⟨n=0, d0=1⟩ x[d0]
                         │   n > 0 ∧ n - 3 < 0
                         │   │   d0 < 0 ⟨n=3/2, d0=-1⟩ x[d0]
                         │   │   d0 = 0 ⟨n=3/2, d0=0⟩ 2.0
                         │   │   d0 > 0 ∧ d0 - n < 0 ⟨n=3/2, d0=3/4⟩ x[d0]
                         │   │   d0 - n = 0 ⟨n=3/2, d0=3/2⟩ 3.0
                         │   │   d0 > n ⟨n=3/2, d0=3⟩ x[d0]
                         │   n - 3 = 0
                         │   │   d0 < 0 ⟨n=3, d0=-1⟩ x[d0]
                         │   │   d0 = 0 ⟨n=3, d0=0⟩ 2.0
                         │   │   d0 > 0 ∧ d0 - n < 0 ⟨n=3, d0=3/2⟩ x[d0]
                         │   │   d0 - n = 0 ⟨n=3, d0=3⟩ x[d0]
                         │   │   d0 > n ⟨n=3, d0=4⟩ x[d0]
                         │   n > 3
                         │   │   d0 < 0 ⟨n=4, d0=-1⟩ x[d0]
                         │   │   d0 = 0 ⟨n=4, d0=0⟩ 2.0
                         │   │   d0 > 0 ∧ d0 - n < 0 ⟨n=4, d0=2⟩ x[d0]
                         │   │   d0 - n = 0 ⟨n=4, d0=4⟩ x[d0]
                         │   │   d0 > n ⟨n=4, d0=5⟩ x[d0]