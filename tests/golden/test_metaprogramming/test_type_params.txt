#include "test.h"

#include <stdio.h>
#include <stdlib.h>

// bar1(
//     a : i32 @DRAM,
//     b : i8 @DRAM
// )
void bar1( void *ctxt, int32_t* a, const int8_t* b ) {
int32_t *c = (int32_t*) malloc(4 * sizeof(*c));
for (int_fast32_t i = 0; i < 3; i++) {
  int32_t d;
  d = (int32_t)(*b);
  c[i + 1] = *a + c[i] * d;
}
*a = c[3];
free(c);
}

// bar2(
//     a : f64 @DRAM,
//     b : f64 @DRAM
// )
void bar2( void *ctxt, double* a, const double* b ) {
double *c = (double*) malloc(4 * sizeof(*c));
for (int_fast32_t i = 0; i < 3; i++) {
  double d;
  d = *b;
  c[i + 1] = *a + c[i] * d;
}
*a = c[3];
free(c);
}

